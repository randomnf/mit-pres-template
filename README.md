# MI Touch presentation template
>**"Hard wЁrk in progress"**

## Установка
```bash
npm i
```

## Использование
Процесс разработки презентации можно разделить на 3 этапа:
1. создание слайдов
2. вертка/программирование слайдов
3. подготовка архивов к загрузке

## Создание/добавление слайдов
Описываем презу в `./presentation.json` и выполняем в консоли `gulp create`

"Мета-шаблон" для шаблонов слайдов лежит в `./src/html/common/slide-template.html`. Выглядит жутко, ибо `gulp-file-include`. ¯\\_(ツ)_/¯

Если на каждом (на большинстве?) слайде присутствует, например, попапчик со ссылками, проще пойти и отредактировать общий шаблон и потом уже нагенерить из него слайдов, чтобы потом меньше редактировать итоговые шаблоны.

Пример содержимого `presentation.json`:
```
{
    "presFullName": "PresFullName_1_2019",

    "slidesPostfix": "--prod",
    "slidesNumStart": 10,
    "slidesNumStep": 10,
    "slidesNumLen": 4,

    "slidesCount": 3
}
```
Из такого `json`-файла будут созданы следующие слайды:
- slide-0010--prod
- slide-0020--prod
- slide-0030--prod

Описание структуры `presentation.json`:
- `presFullName` - полное имя презентации, будет использоваться как префикс к названию/ID слайдов в `parameters.xml` и непосредственно в разметке/js
- `slideNamePostfix` - постфикс для имени слайда, по умолчанию отсутствует
- `slideNumStart` - начальный номер слайдов, по умолчанию `5`
- `slideNumStep` - шаг, с которым увеличивается нумерация слайдов, по умолчанию `5`
- `slideNumLen` - количество символов, которое отводится под номер слайда, по умолчанию `3`; номер слайда будет дополняться ведущими нулями до соответсвия количеству символов, указанному в этом свойстве. Например, номер слайда `20` при `slideNumLen = 4`, будет преобразован к виду `"0020"`
- `slidesCount` - количество слайдов

## Верстка/программирование слайдов
Все стандартно: шаблоны лежат в папке `./src/`.

Для запуска задач для разработки в консоли вводим просто `gulp`.

Данная команда запустит задачи на:
- html-сборку слайдов
- компиляцию css-файлов и копирование их в каждую слайд-папку
- копирование js-файлов в каждую слайд-папку
- копирование изображений из папки `./build/img/` в соответствующие папки слайдов ("распознавание" осуществляется по имени картинки: картинка должна начинаться с порядкового номера слайда; например: `0150__popup-ref.png` или `0010.jpg`)

## Подготовка архивов для загрузки
После разработки всех слайдов, нужно запустить задачу `gulp routine`.

Она выполнит следующие действия:
- "соберет" и раскопирует по папкам файлы `parameters.xml`
- раскопирует `export.pdf` по соответствующим папкам ("распознавание" осуществляется по наличию в названии порядкового номера слайда; например: `./src/pdf/export_0010.pdf`)
- запустит снятие скриншотов с каждого слайда (займет определенное время) и дальнейшее создание тумбнейлов из этих скриншотов
- заархивирует все слайды после выполнения всех вышеописанных задач и положит архивы в папку `./build/zip/`

## Список задач gulp
Если нужно выполнить какую-либо задачу отдельно...

Для создания новых слайдов:  
**create**

Для разработки:  
**browserSync** - запуск локального сервера с авто-перезагрузкой страниц
**html** - "сброка" html файлов слайдов  
**scss** - "сборка" scss файлов в style.css и копирование по всем папкам со слайдами  
**js** - копирование всех js файлов  
**imgcpy** - копирование всех изображений по "схеме", указанной внутри задачи  
**img-thumb** - создание тумбнейлов из изображений, названных по шаблону `xxx.ext`, где `xxx` - номер слайда (названный в соответствии с указанным зачением `slidesNumLen` в `presentation.json`), и `ext` - расширение  

Для подготовки архивов:  
**xml** - создание parameters.xml для каждого слайда по шаблону `./src/xml/parameters.xml`  
**pdfcpy** - копирование всех pdf файлов по "схеме", указанной внутри задачи  
**zip** - архивировние всех слайдов
**thumbs** - последовательный запуск `screens` и `makeThumbs`
**screens** - создание скриншотов для каждого слайда  
**makeThumbs** - создание тумбнейлов и копирование их по папкам из СУЩЕСТВУЮЩИХ скриншотов слайдов (должны лежать в `./screens/`)  
